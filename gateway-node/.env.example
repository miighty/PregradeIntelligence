# PreGrade Gateway (local dev)
# Copy to .env and export with: set -a; source .env; set +a

# Comma-separated API keys. If empty, auth is disabled.
PREGRADE_API_KEYS=dev_key

# Simple in-memory per-minute rate limiter. If empty, rate limiting is disabled.
PREGRADE_RATE_LIMIT_PER_MIN=60

HOST=127.0.0.1
PORT=3000
LOG_LEVEL=info

# --- S3 Signed Uploads ---
# If PREGRADE_UPLOADS_S3_BUCKET is not set, /v1/uploads returns 501 Not Implemented.
# PREGRADE_UPLOADS_S3_BUCKET=my-pregrade-uploads-bucket
# PREGRADE_UPLOADS_S3_REGION=us-east-1
# PREGRADE_UPLOADS_S3_PREFIX=pregrade/uploads/
# PREGRADE_UPLOADS_URL_TTL_SECONDS=900
# PREGRADE_UPLOADS_MAX_BYTES=12582912

# --- Python proxy ---
# PREGRADE_PYTHON_BASE_URL=http://127.0.0.1:8001
# PREGRADE_PYTHON_TIMEOUT_MS=120000
# PREGRADE_BODY_LIMIT_BYTES=20971520

# --- Supabase (multi-tenant keys + usage) ---
# If set, gateway validates X-API-Key against Supabase api_keys table.
# SUPABASE_URL=https://<ref>.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=sb_secret_...
# PREGRADE_API_KEY_HASH_SALT=change-me
